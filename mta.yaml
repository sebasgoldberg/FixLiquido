ID: FixLiquido
_schema-version: '2.1'
description: Correção do preço liquido considerando que o valor atual é o bruto.
version: 0.0.1
modules:
  - name: daemon
    type: nodejs
    path: daemon
    provides:
      - name: daemon_api
        properties:
          url: '${default-url}'
    requires:
      - name: dest_FixLiquido
      - name: uaa_FixLiquido
  - name: router
    type: nodejs
    path: router
    requires:
      - name: dest_FixLiquido
      - name: uaa_FixLiquido
      - name: daemon_api
        group: destinations
        properties:
          name: daemon_api
          url: '~{url}'
          forwardAuthToken: true

resources:
  - name: uaa_FixLiquido
    parameters:
      path: ./xs-security.json
      service-plan: application
      service: xsuaa
      config:
        xsappname: spacetravel-uaa-${space}
        tenant-mode: dedicated
        scopes:
          - name: uaa.user
            description: UAA
        role-templates:
          - name: Token_Exchange
            description: UAA
            scope-references:
              - uaa.user
    type: org.cloudfoundry.managed-service
  - name: dest_FixLiquido
    parameters:
      service-plan: lite
      service: destination
      service-name: dest_FixLiquido
    type: org.cloudfoundry.existing-service
